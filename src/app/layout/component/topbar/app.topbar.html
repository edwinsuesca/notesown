<div class="layout-topbar">
  <div class="layout-topbar-logo-container">
    <button class="layout-menu-button layout-topbar-action" (click)="layoutService.onMenuToggle()">
      <i class="pi pi-bars"></i>
    </button>
    <a class="layout-topbar-logo" routerLink="/">
      <img src="notesown-icon.svg" alt="Notesown" class="w-8">
      <span>Notesown</span>
    </a>
  </div>

  <div class="layout-topbar-actions">
    <div class="flex items-center gap-3" *ngIf="currentUser">
      <button 
        class="layout-topbar-action"
        (click)="navigateToSearch()"
        title="Buscar">
        <i class="pi pi-search"></i>
      </button>
      <div class="flex flex-col items-end">
        <span class="text-sm font-medium text-surface-900 dark:text-surface-0">{{ currentUser.email }}</span>
        <span class="text-xs text-muted-color">{{ currentUser.user_metadata['full_name'] || 'Usuario' }}</span>
      </div>
      <p-avatar [label]="getInitials(currentUser.email || '')"
        class="bg-primary text-primary-contrast cursor-pointer" shape="circle" (click)="menu.toggle($event)">
      </p-avatar>
      <p-menu #menu [model]="userMenuItems" [popup]="true" styleClass="w-48"></p-menu>
    </div>
  </div>
</div>
<div class="min-h-screen">
  <div class="mb-8">
    <h1 
      contenteditable="true"
      (blur)="noteTitle.set($any($event.target).textContent || 'Mi Nota')"
      class="text-3xl font-bold text-surface-900 outline-none focus:ring-2 focus:ring-primary rounded px-2 -mx-2 transition-all cursor-text"
      [textContent]="noteTitle()">
    </h1>
  </div>

  <app-masonry-grid class="mb-20">
    @for (card of cards(); track card.id) {
      @if (card.isTextType) {
      <app-text-card
        [title]="card.title"
        (titleChange)="updateCardTitle(card.id, $event)"
        [textType]="card.textType!"
        [content]="card.content || ''"
        (contentChange)="updateCardContent(card.id, $event)"
        (remove)="removeCard(card.id)">
      </app-text-card>
      } @else if (card.type === 'checklist') {
        <app-checklist-card
          [title]="card.title"
          (titleChange)="updateCardTitle(card.id, $event)"
          [items]="card.items || []"
          (itemsChange)="updateCardItems(card.id, $event)"
          (remove)="removeCard(card.id)">
        </app-checklist-card>
      }
    }

    <button 
      class="p-2 bg-primary/20 rounded-lg cursor-pointer w-16 text-3xl leading-none"
      (click)="menu.toggle($event)"
      aria-label="Agregar contenido">
      +
    </button>
  </app-masonry-grid>

  <!-- MenÃº popup -->
  <p-menu #menu [model]="menuItems" [popup]="true"></p-menu>
</div>
